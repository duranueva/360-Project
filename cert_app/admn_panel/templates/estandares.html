
{% extends 'base_ad.html' %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    {% comment %} {% if messages %}
    <div class="mb-4">
        {% for message in messages %}
        <div class="{% if message.tags %}{{ message.tags }}{% endif %} p-4 rounded-md 
                   {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}bg-red-100 text-red-700
                   {% else %}bg-green-100 text-green-700{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %} {% endcomment %}

    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Estandares de Competencia</h2>
    <p class="font-semibold text-gray-800 mb-4">Todos los EC que aloja el proyecto</p>
    
    <!-- Add this form section at the top -->
    {% if show_form %}
    <div class="mb-6 bg-white p-6 rounded-lg shadow">
        <h3 class="text-lg font-medium text-gray-800 mb-4">Agregar Nuevo Est치ndar</h3>
        <form method="post" action="{% url 'estandares' %}">
            {% csrf_token %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                    <input type="text" name="nombre" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">C칩digo</label>
                    <input type="text" name="codigo" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ID Examen Diagn칩stico</label>
                    <input type="text" name="id_examen_diagnostico" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
            </div>
            <div class="mt-4 flex justify-end space-x-3">
                <button type="submit" name="save" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                    Guardar
                </button>
                <a href="{% url 'estandares' %}" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">
                    Cancelar
                </a>
            </div>
        </form>
    </div>
    {% endif %}
    
    <div class="overflow-x-auto rounded-lg shadow">
        <table class="min-w-full bg-white border border-gray-200">
            <thead class="bg-gray-100 border-b">
                <tr>
                    <th class="px-6 py-3 text-left text-sm font-medium text-gray-700">ID</th>
                    <th class="px-6 py-3 text-left text-sm font-medium text-gray-700">Nombre</th>
                    <th class="px-6 py-3 text-left text-sm font-medium text-gray-700">Codigo</th>
                    <th class="px-6 py-3 text-left text-sm font-medium text-gray-700">Id Examen Diagnostico</th>
                    <th class="px-6 py-3 text-left text-sm font-medium text-gray-700">Fecha Creaci칩n</th>
                    <th class="px-6 py-3 text-left text-sm font-medium text-gray-700">Id Usuario Creador</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
                {% for ec in ecs %}
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 text-sm text-gray-900">{{ ec.id }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ ec.nombre }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ ec.codigo }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ ec.id_examen_diagnostico }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ ec.fecha_creacion }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ ec.id_usuario_creador }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block footer_buttons %}
    <a href="{% url 'estandares' %}?show_form=1" class="w-[150px] py-2 text-white hover:bg-[#003366]">Agregar EC</a> 
{% endblock %}